(this["webpackJsonphrynya-online"]=this["webpackJsonphrynya-online"]||[]).push([[0],[,,,,,,,,,function(e,t,r){e.exports=r.p+"static/media/icon-buy.404339d0.svg"},function(e,t,r){e.exports=r.p+"static/media/icon-sale.9463f2b5.svg"},function(e,t,r){e.exports=r.p+"static/media/icon-arrow.7b6df126.svg"},,,,,function(e,t,r){e.exports=r(31)},,,,,function(e,t,r){},function(e,t,r){},,function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),c=r(8),i=r.n(c),o=(r(21),r(22),r(4)),s=["buy","sale"],l=function e(t,r,n,a){Object(o.a)(this,e),this.currency=t,this.buy=void 0,this.sale=void 0,this.date=void 0,this.buy=parseFloat(r),this.sale=parseFloat(n),this.date=a.toISOString().slice(0,10)},u=r(1),m=r.n(u),f=r(3),p=r(2);function d(e){return"rate.history.."+e.toISOString().slice(0,10)}function v(e){var t=d(e),r=localStorage.getItem(t)||void 0;if(void 0!==r)try{var n=JSON.parse(r);if(Array.isArray(n))return n.map((function(t){var r=Object(p.a)(t,3),n=r[0],a=r[1],c=r[2];return new l(n,a,c,e)}))}catch(a){console.warn(a)}}function h(e,t){var r=d(e),n=JSON.stringify(t.map((function(e){var t=e.buy,r=e.sale;return[e.currency,t,r]})));localStorage.setItem(r,n)}function y(e){return E.apply(this,arguments)}function E(){return(E=Object(f.a)(m.a.mark((function e(t){var r,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===(r=v(t))){e.next=3;break}return e.abrupt("return",r);case 3:return e.next=5,fetch("https://bank.gov.ua/NBUStatService/v1/statdirectory/exchange?json&date="+t.toISOString().slice(0,10).split("-",3).join("")).then((function(e){return e.json()}));case 5:return n=e.sent,r=n.map((function(e){var r=e.cc,n=e.rate;return new l(r,n,n,t)})),h(t,r),e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var g=function(){var e=Object(f.a)(m.a.mark((function e(){var t,r,n,a,c,i=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:30,r=new Date,e.next=4,fetch("https://api.privatbank.ua/p24api/pubinfo?exchange&json&coursid=11").then((function(e){return e.json()})).then((function(e){return e.map((function(e){var t=e.ccy,n=e.buy,a=e.sale;return"RUR"===t&&(t="RUB"),{currency:t,history:[new l(t,n,a,r)]}}))}));case 4:n=e.sent,a=m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new Date(r)).setHours(r.getHours()-24*t),e.next=4,y(a);case 4:e.sent.forEach((function(e){var r=n.find((function(t){return t.currency===e.currency}));void 0!==r&&(r.history[t]=e)}));case 6:case"end":return e.stop()}}),e)})),c=1;case 7:if(!(c<t)){e.next=12;break}return e.delegateYield(a(c),"t0",9);case 9:c++,e.next=7;break;case 12:return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();var b=r(9),w=r.n(b),x=r(10),N=r.n(x),O=(r(24),function(e){switch(e){case"buy":return w.a;case"sale":return N.a}}),j=function(e){var t=e.type;return n.createElement("img",{className:"icon-rate",src:O(t),alt:t[0].toUpperCase()+t.slice(1)+" Rate"})},k=(r(25),r(11)),S=r.n(k),_=function(e){var t=e.value;return void 0===t?null:n.createElement("img",{src:S.a,alt:"".concat(t," trend icon"),className:"icon-rate-trend icon-rate-trend__".concat(t)})},M=(r(26),function(e){var t="trend"in e?e.trend:function(e,t){if(void 0!==t&&t!==e)return t<e?"up":"down"}(e.value,e.previousValue),r=e.value.toFixed(2),a="rate-item";return void 0!==t&&(a+=" ".concat(a,"__").concat(t)),n.createElement("div",{className:a},n.createElement(_,{value:t}),r)}),A=r(5),C=r(6),R=function(e){var t=e.items,r=e.interval,a=e.max,c=void 0===a?Math.max.apply(Math,Object(C.a)(t)):a,i=Math.min.apply(Math,Object(C.a)(t)),o=c-i,s=t.reverse().map((function(e,t){return[t*r*2,(100-(e-i+o)/(c-i+o+o)*100).toFixed(4)]}));s.push([s[s.length-1][0],100]);var l="M 0 100 L "+s.map((function(e){return e.join(" ")})).join(" ")+" Z";return n.createElement("g",{className:"history-chart__line"},n.createElement("path",{fill:"url(#grid2)",d:l}),n.createElement("path",{fill:"none",stroke:"white",strokeWidth:"2",d:l.replace("M 0 100 L ","").replace(/Z$/,"")}))},D=function(e){var t=e.items,r=e.interval,a=void 0===r?10:r,c=Object(A.a)(e,["items","interval"]);return n.createElement("svg",Object.assign({},c,{className:"history-chart ".concat(c.className||"").trimEnd(),height:"128px",viewBox:[-a,-a,a*t.length*2,100+a].join(" "),version:"1.1",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMaxYMid slice"}),n.createElement("defs",null,n.createElement("linearGradient",{id:"grid1",x1:"0%",x2:"50%",gradientTransform:"rotate(90)",spreadMethod:"reflect"},n.createElement("stop",{offset:"0",stopColor:"white",stopOpacity:"0"}),n.createElement("stop",{offset:"100%",stopColor:"white",stopOpacity:"0.29"})),n.createElement("radialGradient",{id:"grid2",x1:"30%",x2:"70%",cx:"50%",cy:"50%",r:"65%",fy:"15%"},n.createElement("stop",{offset:"0",stopColor:"white",stopOpacity:".8"}),n.createElement("stop",{offset:"10%",stopColor:"white",stopOpacity:".7"}),n.createElement("stop",{offset:"30%",stopColor:"white",stopOpacity:".5"}),n.createElement("stop",{offset:"100%",stopColor:"white",stopOpacity:"0"}))),n.createElement("g",{className:"history-chart__grid"},t.map((function(e,t){var r=t*a*2;return n.createElement("rect",{key:"grid"+e.currency+e.date,x:r,y:a,width:"1",fill:"url(#grid1)",height:100-2*a})}))),n.createElement("g",{className:"history-chart__legend"},t.map((function(e,t){var r=a-1,c=t*a*2-r/2;return n.createElement("text",{key:"legend"+e.currency+e.date,x:c,y:100,fill:"white",fontSize:r},e.date.slice(-2))}))),n.createElement(R,{items:t.map((function(e){return e.buy})),min:0,interval:a}))},I=function(e){var t=e.type,r=e.rate.history[0][t];return n.createElement("div",{className:"exchange-article__rate","aria-label":t,"aria-valuenow":r},n.createElement(j,{type:t}),n.createElement(M,{value:r}))},F=function(e){var t=e.rate;return n.createElement("article",{title:t.currency,className:"exchange-article"},n.createElement("h3",{className:"exchange-article__title"},t.currency),s.map((function(e){return n.createElement(I,{key:e,type:e,rate:t})})),t.history.length>1&&n.createElement(D,{items:t.history,className:"exchange-article__chart",preserveAspectRatio:"xMinYMid meet"}))};F.displayName="Exchange.Article";var L=function(e){var t=e.rates;return n.createElement(n.Fragment,null,t.map((function(e){return n.createElement(F,{key:e.currency,rate:e})})))},J=(r(27),r(28),function(){return(new Date).toLocaleDateString()}),U=function(){return(new Date).toTimeString().slice(0,8)},B=n.forwardRef((function(e,t){var r=e.format,a=e.interval,c=void 0===a?1e3:a,i=Object(A.a)(e,["format","interval"]),o=n.useReducer(r,void 0,r),s=Object(p.a)(o,2),l=s[0],u=s[1];return n.useEffect((function(){return clearInterval.bind(window,setInterval(u,c))}),[c]),n.createElement("span",Object.assign({},i,{className:"dt__item ".concat(i.className).trimEnd(),ref:t}),l)})),z=n.forwardRef((function(e,t){return n.createElement("div",Object.assign({},e,{ref:t,className:"dt ".concat(e.className).trimEnd()}),n.createElement(B,{className:"date",format:J,interval:6e4}),n.createElement(B,{className:"time",format:U}))})),Y=function(){return n.createElement("header",{className:"shadow"},n.createElement("img",{src:"./logo.svg",alt:"\u0413\u0440\u0438\u0432\u043d\u0430 \u041e\u043d\u043b\u0430\u0439\u043d",className:"logo"}),n.createElement("h1",{className:"brand"},"\u0433\u0440\u0438\u0432\u043d\u0430",n.createElement("span",{className:"fw-lighter"},".online")),n.createElement("h2",{className:"slogan"},"\u0443\u043a\u0440\u0430\u0438\u043d\u0441\u043a\u0438\u0439 \u0434\u0437\u0435\u043d"),n.createElement(z,null))},G=(r(29),function(e){var t,r="theme"in e?e.theme:void 0===(t=e.state)?"loading":Array.isArray(t)?"ready":"error";return n.createElement("video",{autoPlay:!0,muted:!0,loop:!0,className:"background background_".concat(r)},n.createElement("source",{src:"./background.mp4",type:"video/mp4"}))}),H=function(e){var t,r=e.value;try{t="string"===typeof r?r:JSON.stringify(r)}catch(a){t="Unable to serialize stack: ".concat(a.message)}return n.createElement("code",null,t)},T=function(e){var t=e.error;return n.createElement("details",null,n.createElement("summary",null,"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430. \u041a\u0438\u043d\u0430 \u043d\u0435 \u0431\u0443\u0434\u0435\u0442."),n.createElement("h3",null,t.name),n.createElement("p",null,t.message),n.createElement(H,{value:t.stack}),"componentStack"in t&&n.createElement(H,{value:t.componentStack}))};T.displayName="Error.Layout";var Z=r(12),q=r(14),P=r(13),V=r(15),W=function(e){function t(){var e,r;Object(o.a)(this,t);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return(r=Object(q.a)(this,(e=Object(P.a)(t)).call.apply(e,[this].concat(a)))).state=t.emptyState,r}return Object(V.a)(t,e),Object(Z.a)(t,[{key:"componentDidCatch",value:function(e,t){this.setState(e),Object.assign(e,t)}},{key:"render",value:function(){return this.state!==t.emptyState?n.createElement(T,{error:this.state}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return e}}]),t}(n.Component);W.displayName="Error.Boundary",W.emptyState=Object.freeze({});var $=function(){return n.createElement("p",null,"Loading...")};$.displayName="Loader";r(30);var K=function(e){var t=e.exchange;return n.createElement("main",null,n.createElement(W,null,function(e){return void 0===e?n.createElement($,null):Array.isArray(e)?n.createElement(L,{rates:e}):n.createElement(T,{error:e})}(t)))};K.displayName="Main";i.a.render(a.a.createElement((function(){var e=function(){var e=n.useState(void 0),t=Object(p.a)(e,2),r=t[0],a=t[1];return n.useEffect((function(){void 0===r&&g().then(a,a)}),[r]),r}();return n.createElement("div",{className:"app"},n.createElement(G,{state:e}),n.createElement("div",{className:"container"},n.createElement(Y,null),n.createElement(K,{exchange:e})))}),null),document.querySelector("exchange-rate"))}],[[16,1,2]]]);
//# sourceMappingURL=main.d658bb2c.chunk.js.map